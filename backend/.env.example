# CLIMATRIX Backend Configuration
# Copy this file to .env and fill in your values

# ──────────────────────────────────────────────
# Application
# ──────────────────────────────────────────────
APP_NAME=CLIMATRIX
APP_VERSION=3.1.0
DEBUG=false
ENVIRONMENT=development  # development, staging, production

# ──────────────────────────────────────────────
# Database
# ──────────────────────────────────────────────
# For local development (SQLite):
DATABASE_URL=sqlite+aiosqlite:///./climatrix.db
# For production (PostgreSQL via Railway):
# DATABASE_URL=postgresql://user:password@host:5432/climatrix
DATABASE_ECHO=false  # Set to true to log SQL queries

# ──────────────────────────────────────────────
# Redis (for background task queue)
# ──────────────────────────────────────────────
REDIS_URL=redis://localhost:6379

# ──────────────────────────────────────────────
# JWT Authentication
# ──────────────────────────────────────────────
# IMPORTANT: Generate a strong key for production: openssl rand -hex 32
SECRET_KEY=CHANGE-THIS-IN-PRODUCTION-use-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ──────────────────────────────────────────────
# CORS
# ──────────────────────────────────────────────
# Comma-separated origins, or "*" for development
# Production example: https://climatrix.io,https://app.climatrix.io
CORS_ORIGINS_STR=http://localhost:3000,http://localhost:3001
CORS_ALLOW_VERCEL_PREVIEWS=true  # Allow *.vercel.app preview deploys

# ──────────────────────────────────────────────
# Google OAuth
# ──────────────────────────────────────────────
# Get from Google Cloud Console → APIs & Services → Credentials
GOOGLE_CLIENT_ID=

# ──────────────────────────────────────────────
# Reference Data
# ──────────────────────────────────────────────
DEFAULT_EMISSION_FACTOR_YEAR=2024
DEFAULT_REGION=Global

# ──────────────────────────────────────────────
# Feature Flags
# ──────────────────────────────────────────────
ENABLE_WTT_AUTO_CALCULATION=true
ENABLE_MARKET_BASED_SCOPE2=true

# ──────────────────────────────────────────────
# Claude AI (Anthropic) — Optional
# ──────────────────────────────────────────────
ANTHROPIC_API_KEY=
CLAUDE_MODEL=claude-sonnet-4-20250514
AI_EXTRACTION_ENABLED=true

# ──────────────────────────────────────────────
# Monitoring & Error Tracking — Optional
# ──────────────────────────────────────────────
SENTRY_DSN=

# ──────────────────────────────────────────────
# Email (SMTP) — Optional, for password reset and invitations
# ──────────────────────────────────────────────
SMTP_HOST=         # e.g., smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@climatrix.io
SMTP_FROM_NAME=CLIMATRIX
SMTP_USE_TLS=true

# Frontend URL (used for links in emails)
FRONTEND_URL=http://localhost:3000

# Password Reset
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30

# ──────────────────────────────────────────────
# File Storage (S3-compatible: AWS S3 or Cloudflare R2)
# ──────────────────────────────────────────────
STORAGE_BACKEND=local  # "local" or "s3"
S3_BUCKET_NAME=
S3_REGION=auto         # "auto" for Cloudflare R2
S3_ENDPOINT_URL=       # e.g., https://<account_id>.r2.cloudflarestorage.com
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=

# ──────────────────────────────────────────────
# Stripe Billing — Optional, for subscription payments
# ──────────────────────────────────────────────
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_ID_STARTER=       # Price ID for Starter plan ($349/mo)
STRIPE_PRICE_ID_PROFESSIONAL=  # Price ID for Professional plan ($799/mo)
STRIPE_PRICE_ID_ENTERPRISE=    # Price ID for Enterprise plan ($1,799/mo)
