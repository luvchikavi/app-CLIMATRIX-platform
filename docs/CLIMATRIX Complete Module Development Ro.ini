 CLIMATRIX Complete Module Development Roadmap                                                                                                         
                                                                                                                                                       
 Version: 1.0                                                                                                                                          
 Date: January 2026                                                                                                                                    
 Purpose: Comprehensive development plan for all sustainability modules                                                                                
 Target: Production-ready platform meeting external auditor requirements                                                                               
                                                                                                                                                       
 ---                                                                                                                                                   
 Table of Contents                                                                                                                                     
                                                                                                                                                       
 1. #1-executive-summary                                                                                                                               
 2. #2-ghg-inventory-module                                                                                                                            
 3. #3-cbam-module                                                                                                                                     
 4. #4-pcaf-module                                                                                                                                     
 5. #5-epd-module                                                                                                                                      
 6. #6-lca-engine                                                                                                                                      
 7. #7-database-schema                                                                                                                                 
 8. #8-api-architecture                                                                                                                                
 9. #9-verification--audit                                                                                                                             
 10. #10-implementation-roadmap                                                                                                                        
                                                                                                                                                       
 ---                                                                                                                                                   
 1. Executive Summary                                                                                                                                  
                                                                                                                                                       
 1.1 Vision                                                                                                                                            
                                                                                                                                                       
 CLIMATRIX aims to be a comprehensive carbon accounting platform that enables organizations to:                                                        
 - Measure emissions across all scopes and value chains                                                                                                
 - Report to regulatory bodies (EU CBAM, CSRD, SEC)                                                                                                    
 - Calculate carbon taxes and certificate requirements                                                                                                 
 - Generate verified declarations (EPD, GHG reports)                                                                                                   
                                                                                                                                                       
 1.2 Module Overview                                                                                                                                   
 ┌───────────────┬──────────────────────────┬──────────────┬────────────────────────┐                                                                  
 │    Module     │   Standard/Regulation    │    Status    │      Target Users      │                                                                  
 ├───────────────┼──────────────────────────┼──────────────┼────────────────────────┤                                                                  
 │ GHG Inventory │ GHG Protocol (WRI/WBCSD) │ 90% Complete │ All organizations      │                                                                  
 ├───────────────┼──────────────────────────┼──────────────┼────────────────────────┤                                                                  
 │ CBAM          │ EU Regulation 2023/956   │ 0%           │ EU importers/exporters │                                                                  
 ├───────────────┼──────────────────────────┼──────────────┼────────────────────────┤                                                                  
 │ PCAF          │ PCAF Global Standard v3  │ 0%           │ Financial institutions │                                                                  
 ├───────────────┼──────────────────────────┼──────────────┼────────────────────────┤                                                                  
 │ EPD           │ ISO 14025, EN 15804      │ 0%           │ Manufacturers          │                                                                  
 ├───────────────┼──────────────────────────┼──────────────┼────────────────────────┤                                                                  
 │ LCA Engine    │ ISO 14040/14044          │ 0%           │ All modules (shared)   │                                                                  
 └───────────────┴──────────────────────────┴──────────────┴────────────────────────┘                                                                  
 1.3 Key Requirements for Auditor Compliance                                                                                                           
                                                                                                                                                       
 1. Data Traceability: Full audit trail for all inputs and calculations                                                                                
 2. Methodology Transparency: Clear documentation of calculation methods                                                                               
 3. Third-Party Verification: Support for external auditor review                                                                                      
 4. Version Control: Track changes to emission factors and methodologies                                                                               
 5. Data Quality Indicators: Confidence levels and uncertainty analysis                                                                                
 6. Regulatory Alignment: Meet specific regulatory calculation requirements                                                                            
                                                                                                                                                       
 ---                                                                                                                                                   
 2. GHG Inventory Module                                                                                                                               
                                                                                                                                                       
 2.1 Regulatory Framework                                                                                                                              
                                                                                                                                                       
 Primary Standard: https://ghgprotocol.org/corporate-standard                                                                                          
 - Corporate Accounting and Reporting Standard (Revised Edition)                                                                                       
 - Scope 3 Standard (Corporate Value Chain)                                                                                                            
 - GHG Protocol Guidance documents                                                                                                                     
                                                                                                                                                       
 Compliance Requirements:                                                                                                                              
 - Define organizational boundaries (equity share, financial control, operational control)                                                             
 - Report Scope 1, 2, and 3 emissions separately                                                                                                       
 - Use appropriate emission factors from recognized sources                                                                                            
 - Apply consistent methodologies year-over-year                                                                                                       
 - Document data quality and uncertainties                                                                                                             
                                                                                                                                                       
 2.2 Current Implementation Status                                                                                                                     
 ┌──────────────────┬─────────┬───────────────────────────────────────────────┐                                                                        
 │    Component     │ Status  │                     Notes                     │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Scope 1 (Direct) │ ✅ 100% │ Fuel combustion, refrigerants, mobile sources │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Scope 2 (Energy) │ ✅ 100% │ Location-based and market-based               │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Scope 3.1-3.15   │ ✅ 95%  │ All 15 categories implemented                 │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ WTT (3.3)        │ ✅ 100% │ Auto-calculated from Scope 1/2                │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Emission Factors │ ✅ 90%  │ DEFRA, EPA, EEIO, IPCC AR6                    │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Reporting        │ ⚠️ 70%  │ Basic reports, need enhancement               │                                                                        
 ├──────────────────┼─────────┼───────────────────────────────────────────────┤                                                                        
 │ Verification     │ ❌ 0%   │ No audit workflow                             │                                                                        
 └──────────────────┴─────────┴───────────────────────────────────────────────┘                                                                        
 2.3 Gaps to Complete                                                                                                                                  
                                                                                                                                                       
 2.3.1 Verification Workflow (Priority: HIGH)                                                                                                          
                                                                                                                                                       
 ┌─────────────────────────────────────────────────────────────────┐                                                                                   
 │  GHG Inventory Verification Workflow                            │                                                                                   
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │                                                                 │                                                                                   
 │  [Draft] → [Internal Review] → [Submitted] → [Under Audit]     │                                                                                    
 │                                      ↓              ↓           │                                                                                   
 │                               [Rejected]    [Verified]          │                                                                                   
 │                                      ↓              ↓           │                                                                                   
 │                               [Revision]     [Locked]           │                                                                                   
 │                                                                 │                                                                                   
 └─────────────────────────────────────────────────────────────────┘                                                                                   
                                                                                                                                                       
 Database Changes:                                                                                                                                     
 class ReportingPeriod:                                                                                                                                
     # Add new fields                                                                                                                                  
     status: str = "draft"  # draft, review, submitted, audit, verified, locked                                                                        
     submitted_at: Optional[datetime]                                                                                                                  
     submitted_by: Optional[UUID]                                                                                                                      
     verified_at: Optional[datetime]                                                                                                                   
     verified_by: Optional[str]  # Auditor name/firm                                                                                                   
     verification_statement: Optional[str]                                                                                                             
     assurance_level: Optional[str]  # limited, reasonable                                                                                             
                                                                                                                                                       
 2.3.2 Enhanced Reporting (Priority: HIGH)                                                                                                             
                                                                                                                                                       
 Required Reports:                                                                                                                                     
 1. GHG Inventory Report (ISO 14064-1 format)                                                                                                          
   - Executive summary                                                                                                                                 
   - Organizational boundaries                                                                                                                         
   - Scope 1, 2, 3 breakdown                                                                                                                           
   - Methodology description                                                                                                                           
   - Data quality assessment                                                                                                                           
   - Base year comparison                                                                                                                              
   - Verification statement                                                                                                                            
 2. CDP/CSRD Compatible Export                                                                                                                         
   - Structured data for CDP questionnaire                                                                                                             
   - ESRS E1 climate data format                                                                                                                       
 3. Audit Evidence Package                                                                                                                             
   - Activity data with source documents                                                                                                               
   - Emission factor references                                                                                                                        
   - Calculation methodology documentation                                                                                                             
   - Change log                                                                                                                                        
                                                                                                                                                       
 2.3.3 Data Quality Framework (Priority: MEDIUM)                                                                                                       
                                                                                                                                                       
 Implement PCAF-style Data Quality Scores:                                                                                                             
 ┌───────┬────────────────────────────────────┬─────────────────────────┐                                                                              
 │ Score │            Description             │         Example         │                                                                              
 ├───────┼────────────────────────────────────┼─────────────────────────┤                                                                              
 │ 1     │ Verified, specific data            │ Audited energy bills    │                                                                              
 ├───────┼────────────────────────────────────┼─────────────────────────┤                                                                              
 │ 2     │ Non-verified, specific data        │ Unaudited supplier data │                                                                              
 ├───────┼────────────────────────────────────┼─────────────────────────┤                                                                              
 │ 3     │ Specific activity, average factors │ km driven × avg EF      │                                                                              
 ├───────┼────────────────────────────────────┼─────────────────────────┤                                                                              
 │ 4     │ Estimated activity, proxy data     │ Revenue-based estimates │                                                                              
 ├───────┼────────────────────────────────────┼─────────────────────────┤                                                                              
 │ 5     │ Spend-based EEIO                   │ $ spent × EEIO factor   │                                                                              
 └───────┴────────────────────────────────────┴─────────────────────────┘                                                                              
 Database Changes:                                                                                                                                     
 class Activity:                                                                                                                                       
     data_quality_score: int = 5  # 1-5 scale                                                                                                          
     data_quality_justification: Optional[str]                                                                                                         
     supporting_document_id: Optional[UUID]                                                                                                            
                                                                                                                                                       
 2.3.4 Uncertainty Analysis (Priority: LOW)                                                                                                            
                                                                                                                                                       
 - Calculate uncertainty ranges for total emissions                                                                                                    
 - Monte Carlo simulation for complex calculations                                                                                                     
 - Report 95% confidence intervals                                                                                                                     
                                                                                                                                                       
 ---                                                                                                                                                   
 3. CBAM Module                                                                                                                                        
                                                                                                                                                       
 3.1 Regulatory Framework                                                                                                                              
                                                                                                                                                       
 Regulation: https://taxation-customs.ec.europa.eu/carbon-border-adjustment-mechanism_en                                                               
 - Regulation (EU) 2023/956                                                                                                                            
 - Implementing Regulation (EU) 2023/2547                                                                                                              
 - Effective: Transitional phase 2023-2025, Definitive phase from 2026                                                                                 
                                                                                                                                                       
 Purpose: Price carbon on imports to prevent carbon leakage and incentivize global decarbonization.                                                    
                                                                                                                                                       
 3.2 Covered Products (CN Codes)                                                                                                                       
 ┌──────────────┬───────────────────────────────────────────────────┬────────────────────────┐                                                         
 │    Sector    │                     Products                      │        CN Codes        │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Cement       │ Cement clinker, Portland cement, aluminous cement │ 2523                   │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Iron & Steel │ Pig iron, ferro-alloys, iron/steel products       │ 72, 73                 │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Aluminium    │ Unwrought aluminium, aluminium products           │ 76                     │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Fertilisers  │ Nitric acid, ammonia, potassium nitrate           │ 2808, 2814, 3102, 3105 │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Electricity  │ Electrical energy                                 │ 2716                   │                                                         
 ├──────────────┼───────────────────────────────────────────────────┼────────────────────────┤                                                         
 │ Hydrogen     │ Hydrogen                                          │ 2804 10 00             │                                                         
 └──────────────┴───────────────────────────────────────────────────┴────────────────────────┘                                                         
 3.3 Calculation Methodology                                                                                                                           
                                                                                                                                                       
 3.3.1 Core Formula                                                                                                                                    
                                                                                                                                                       
 Embedded Emissions = Direct Emissions + Indirect Emissions                                                                                            
                                                                                                                                                       
 Where:                                                                                                                                                
 - Direct Emissions = Σ (Activity Data × Emission Factor) for production process                                                                       
 - Indirect Emissions = Electricity Consumption × Grid Emission Factor                                                                                 
                        (Only for cement and fertilisers in definitive phase)                                                                          
                                                                                                                                                       
 3.3.2 Specific Embedded Emissions                                                                                                                     
                                                                                                                                                       
 SEE = (Direct Emissions attributed to goods + Emissions from precursors) / Mass of goods produced                                                     
                                                                                                                                                       
 SEE = Specific Embedded Emissions (tCO2e per tonne of product)                                                                                        
                                                                                                                                                       
 3.3.3 CBAM Certificate Calculation                                                                                                                    
                                                                                                                                                       
 Certificates Required = Σ (Imported Mass × SEE × (1 - Carbon Price Deduction))                                                                        
                                                                                                                                                       
 CBAM Cost = Certificates Required × Weekly EU ETS Price                                                                                               
                                                                                                                                                       
 3.4 Database Schema                                                                                                                                   
                                                                                                                                                       
 # New Models for CBAM Module                                                                                                                          
                                                                                                                                                       
 class CBAMProduct(SQLModel, table=True):                                                                                                              
     """Products covered by CBAM"""                                                                                                                    
     id: UUID                                                                                                                                          
     cn_code: str  # EU Combined Nomenclature code                                                                                                     
     cn_code_8digit: str  # Full 8-digit code                                                                                                          
     description: str                                                                                                                                  
     sector: str  # cement, steel, aluminium, fertiliser, electricity, hydrogen                                                                        
     aggregated_category: str  # Per CBAM Annex I                                                                                                      
     direct_emissions_required: bool = True                                                                                                            
     indirect_emissions_required: bool = False  # Only cement/fertilisers                                                                              
                                                                                                                                                       
 class CBAMInstallation(SQLModel, table=True):                                                                                                         
     """Non-EU production installations"""                                                                                                             
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     name: str                                                                                                                                         
     country_code: str  # ISO 3166-1 alpha-2                                                                                                           
     address: str                                                                                                                                      
     operator_name: str                                                                                                                                
     operator_contact: str                                                                                                                             
     production_processes: List[str]  # JSON array                                                                                                     
     third_country_carbon_price: Optional[Decimal]  # If applicable                                                                                    
     verification_status: str  # unverified, verified                                                                                                  
                                                                                                                                                       
 class CBAMImport(SQLModel, table=True):                                                                                                               
     """Import declarations for CBAM goods"""                                                                                                          
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     reporting_period_id: UUID                                                                                                                         
     import_date: date                                                                                                                                 
     customs_entry_number: str                                                                                                                         
                                                                                                                                                       
     # Product details                                                                                                                                 
     cn_code: str                                                                                                                                      
     product_description: str                                                                                                                          
     origin_country: str                                                                                                                               
     installation_id: Optional[UUID]  # FK to CBAMInstallation                                                                                         
                                                                                                                                                       
     # Quantities                                                                                                                                      
     net_mass_kg: Decimal                                                                                                                              
     supplementary_unit: Optional[str]  # e.g., MWh for electricity                                                                                    
     supplementary_quantity: Optional[Decimal]                                                                                                         
                                                                                                                                                       
     # Emissions                                                                                                                                       
     direct_emissions_tco2e: Decimal                                                                                                                   
     indirect_emissions_tco2e: Optional[Decimal]                                                                                                       
     total_embedded_emissions_tco2e: Decimal                                                                                                           
     specific_embedded_emissions: Decimal  # tCO2e per tonne                                                                                           
                                                                                                                                                       
     # Calculation method                                                                                                                              
     calculation_method: str  # actual, default_value, equivalent_method                                                                               
     default_value_used: bool = False                                                                                                                  
                                                                                                                                                       
     # Carbon price deduction                                                                                                                          
     carbon_price_paid: Optional[Decimal]  # Amount in EUR                                                                                             
     carbon_price_country: Optional[str]                                                                                                               
     carbon_price_deduction_tco2e: Optional[Decimal]                                                                                                   
                                                                                                                                                       
     # Audit                                                                                                                                           
     data_source: str  # supplier, estimate, default                                                                                                   
     supporting_documents: List[str]  # JSON array of document IDs                                                                                     
                                                                                                                                                       
 class CBAMQuarterlyReport(SQLModel, table=True):                                                                                                      
     """Quarterly CBAM reports (transitional phase)"""                                                                                                 
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     reporting_year: int                                                                                                                               
     reporting_quarter: int  # 1, 2, 3, 4                                                                                                              
     submission_deadline: date                                                                                                                         
                                                                                                                                                       
     # Aggregated data                                                                                                                                 
     total_imports_kg: Decimal                                                                                                                         
     total_direct_emissions_tco2e: Decimal                                                                                                             
     total_indirect_emissions_tco2e: Decimal                                                                                                           
     total_embedded_emissions_tco2e: Decimal                                                                                                           
                                                                                                                                                       
     # Status                                                                                                                                          
     status: str  # draft, submitted, accepted, rejected                                                                                               
     submitted_at: Optional[datetime]                                                                                                                  
     submission_reference: Optional[str]  # EU CBAM Registry reference                                                                                 
                                                                                                                                                       
 class CBAMAnnualDeclaration(SQLModel, table=True):                                                                                                    
     """Annual CBAM declarations (definitive phase from 2026)"""                                                                                       
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     reporting_year: int                                                                                                                               
                                                                                                                                                       
     # Certificate calculations                                                                                                                        
     total_embedded_emissions_tco2e: Decimal                                                                                                           
     carbon_price_deductions_tco2e: Decimal                                                                                                            
     net_emissions_tco2e: Decimal                                                                                                                      
     certificates_required: int                                                                                                                        
     certificates_purchased: int                                                                                                                       
     certificates_surrendered: int                                                                                                                     
                                                                                                                                                       
     # Financial                                                                                                                                       
     certificate_cost_eur: Decimal                                                                                                                     
     carbon_price_deductions_eur: Decimal                                                                                                              
                                                                                                                                                       
     # Status                                                                                                                                          
     status: str  # draft, submitted, verified                                                                                                         
     submission_deadline: date  # September 30                                                                                                         
     verification_statement: Optional[str]                                                                                                             
                                                                                                                                                       
 3.5 Emission Factor Data                                                                                                                              
                                                                                                                                                       
 # CBAM Default Values (from EU Commission)                                                                                                            
 CBAM_DEFAULT_VALUES = {                                                                                                                               
     # Cement (tCO2e per tonne)                                                                                                                        
     "2523_10": 0.756,  # Cement clinker                                                                                                               
     "2523_21": 0.632,  # White Portland cement                                                                                                        
     "2523_29": 0.632,  # Other Portland cement                                                                                                        
     "2523_30": 0.425,  # Aluminous cement                                                                                                             
     "2523_90": 0.632,  # Other hydraulic cements                                                                                                      
                                                                                                                                                       
     # Iron and Steel (tCO2e per tonne)                                                                                                                
     "7201": 1.328,     # Pig iron                                                                                                                     
     "7202": 0.716,     # Ferro-alloys (average)                                                                                                       
     "7206": 0.352,     # Iron/steel ingots                                                                                                            
     "7207": 1.115,     # Semi-finished products                                                                                                       
     "7208": 1.297,     # Hot-rolled flat products                                                                                                     
     # ... extensive list per CN code                                                                                                                  
                                                                                                                                                       
     # Aluminium (tCO2e per tonne)                                                                                                                     
     "7601_10": 6.717,  # Unwrought aluminium, not alloyed                                                                                             
     "7601_20": 1.252,  # Unwrought aluminium alloys                                                                                                   
     "7602": 0.517,     # Aluminium waste and scrap                                                                                                    
     "7603": 7.121,     # Aluminium powders and flakes                                                                                                 
     # ...                                                                                                                                             
                                                                                                                                                       
     # Fertilisers (tCO2e per tonne)                                                                                                                   
     "2808_00": 0.628,  # Nitric acid                                                                                                                  
     "2814": 1.829,     # Ammonia                                                                                                                      
     "3102_10": 2.533,  # Urea                                                                                                                         
     "3102_30": 3.107,  # Ammonium nitrate                                                                                                             
     # ...                                                                                                                                             
                                                                                                                                                       
     # Hydrogen (tCO2e per tonne)                                                                                                                      
     "2804_10_00_grey": 11.9,   # Grey hydrogen (SMR)                                                                                                  
     "2804_10_00_blue": 4.5,    # Blue hydrogen (with CCS)                                                                                             
     "2804_10_00_green": 0.0,   # Green hydrogen (electrolysis + renewable)                                                                            
 }                                                                                                                                                     
                                                                                                                                                       
 # Grid emission factors for indirect emissions                                                                                                        
 CBAM_GRID_FACTORS = {                                                                                                                                 
     "CN": 0.582,  # China                                                                                                                             
     "IN": 0.708,  # India                                                                                                                             
     "TR": 0.431,  # Turkey                                                                                                                            
     "RU": 0.327,  # Russia                                                                                                                            
     "UA": 0.345,  # Ukraine                                                                                                                           
     # ... all third countries                                                                                                                         
 }                                                                                                                                                     
                                                                                                                                                       
 3.6 User Interface Requirements                                                                                                                       
                                                                                                                                                       
 3.6.1 CBAM Dashboard                                                                                                                                  
                                                                                                                                                       
 ┌─────────────────────────────────────────────────────────────────┐                                                                                   
 │  CBAM Dashboard                                   [Q4 2025 ▼]   │                                                                                   
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐            │                                                                                    
 │  │ Total Imports│ │ Embedded     │ │ Est. CBAM    │            │                                                                                    
 │  │ 1,234 tonnes │ │ 2,567 tCO2e  │ │ €185,000     │            │                                                                                    
 │  └──────────────┘ └──────────────┘ └──────────────┘            │                                                                                    
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │  Imports by Sector                                              │                                                                                   
 │  ┌──────────────────────────────────────────────────────────┐  │                                                                                    
 │  │ [Stacked Bar Chart: Steel | Aluminium | Cement | ...]    │  │                                                                                    
 │  └──────────────────────────────────────────────────────────┘  │                                                                                    
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │  Quarterly Report Status                                        │                                                                                   
 │  [✓ Q1 Submitted] [✓ Q2 Submitted] [⏳ Q3 Draft] [○ Q4]        │                                                                                    
 │                                                                 │                                                                                   
 │  [+ Add Import]  [📄 Generate Report]  [📤 Submit to Registry] │                                                                                    
 └─────────────────────────────────────────────────────────────────┘                                                                                   
                                                                                                                                                       
 3.6.2 Import Entry Form                                                                                                                               
                                                                                                                                                       
 Fields:                                                                                                                                               
 - Customs entry number                                                                                                                                
 - Import date                                                                                                                                         
 - CN code (searchable dropdown)                                                                                                                       
 - Product description                                                                                                                                 
 - Origin country                                                                                                                                      
 - Net mass (kg)                                                                                                                                       
 - Installation (select or create new)                                                                                                                 
 - Calculation method (actual data / default value)                                                                                                    
 - If actual: Direct emissions, Indirect emissions                                                                                                     
 - If default: Auto-fill from CBAM_DEFAULT_VALUES                                                                                                      
 - Carbon price already paid (if applicable)                                                                                                           
 - Supporting documents upload                                                                                                                         
                                                                                                                                                       
 ---                                                                                                                                                   
 4. PCAF Module                                                                                                                                        
                                                                                                                                                       
 4.1 Regulatory Framework                                                                                                                              
                                                                                                                                                       
 Standard: https://carbonaccountingfinancials.com/standard                                                                                             
 - Part A: Financed Emissions                                                                                                                          
 - Part B: Facilitated Emissions (Capital Markets)                                                                                                     
 - Part C: Insurance-Associated Emissions                                                                                                              
                                                                                                                                                       
 GHG Protocol Conformance: Built on Scope 3 Category 15 (Investments)                                                                                  
                                                                                                                                                       
 4.2 Asset Classes                                                                                                                                     
 ┌──────────────────────────────────┬───────────────────────────────┬──────────────────────┐                                                           
 │           Asset Class            │        Scope Coverage         │  Attribution Method  │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Listed Equity & Corporate Bonds  │ 1, 2, 3 (mandatory from 2025) │ EVIC attribution     │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Business Loans & Unlisted Equity │ 1, 2, 3 (encouraged)          │ Total equity + debt  │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Project Finance                  │ 1, 2 (project-level)          │ % of total financing │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Commercial Real Estate           │ 1, 2                          │ Floor area or value  │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Mortgages                        │ 1, 2                          │ Property value       │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Motor Vehicle Loans              │ Use-phase (tank-to-wheel)     │ Outstanding amount   │                                                           
 ├──────────────────────────────────┼───────────────────────────────┼──────────────────────┤                                                           
 │ Sovereign Debt                   │ National GHG inventory        │ GDP attribution      │                                                           
 └──────────────────────────────────┴───────────────────────────────┴──────────────────────┘                                                           
 4.3 Attribution Formulas                                                                                                                              
                                                                                                                                                       
 4.3.1 Listed Equity & Corporate Bonds                                                                                                                 
                                                                                                                                                       
 Financed Emissions = Σ (Attribution Factor × Company Emissions)                                                                                       
                                                                                                                                                       
 Attribution Factor = Outstanding Amount / EVIC                                                                                                        
                                                                                                                                                       
 EVIC = Enterprise Value Including Cash                                                                                                                
      = Market Cap + Total Debt - Cash                                                                                                                 
                                                                                                                                                       
 Example:                                                                                                                                              
 - Investment: $10M in Company X                                                                                                                       
 - Company X EVIC: $500M                                                                                                                               
 - Company X Scope 1+2+3: 1,000,000 tCO2e                                                                                                              
 - Attribution: ($10M / $500M) × 1,000,000 = 20,000 tCO2e                                                                                              
                                                                                                                                                       
 4.3.2 Business Loans & Unlisted Equity                                                                                                                
                                                                                                                                                       
 Attribution Factor = Outstanding Amount / (Total Equity + Total Debt)                                                                                 
                                                                                                                                                       
 For unlisted companies without public financials:                                                                                                     
 - Use book value of equity                                                                                                                            
 - Use total outstanding debt                                                                                                                          
                                                                                                                                                       
 4.3.3 Project Finance                                                                                                                                 
                                                                                                                                                       
 Attribution Factor = Outstanding Amount / Total Project Cost                                                                                          
                                                                                                                                                       
 Financed Emissions = Attribution Factor × Project Lifetime Emissions                                                                                  
                                                                                                                                                       
 Note: Only include emissions during financed period                                                                                                   
                                                                                                                                                       
 4.3.4 Commercial Real Estate                                                                                                                          
                                                                                                                                                       
 Method 1 (Building-Specific Data):                                                                                                                    
 Financed Emissions = (Outstanding Amount / Property Value) × Building Emissions                                                                       
                                                                                                                                                       
 Method 2 (Average Data):                                                                                                                              
 Financed Emissions = Floor Area × EF per m² × Attribution Factor                                                                                      
                                                                                                                                                       
 EF sources: CRREM, Energy Star, local building codes                                                                                                  
                                                                                                                                                       
 4.3.5 Mortgages                                                                                                                                       
                                                                                                                                                       
 Financed Emissions = (Outstanding Amount / Property Value at Origination) × Building Emissions                                                        
                                                                                                                                                       
 Building Emissions = Energy Use × Grid Factor                                                                                                         
                   or Estimated from property type × region × vintage                                                                                  
                                                                                                                                                       
 4.3.6 Motor Vehicle Loans                                                                                                                             
                                                                                                                                                       
 Financed Emissions = (Outstanding Amount / Vehicle Value) × Annual Emissions                                                                          
                                                                                                                                                       
 Annual Emissions = Annual Distance × Emission Factor                                                                                                  
                 or Fuel Type × Average Consumption                                                                                                    
                                                                                                                                                       
 EF by vehicle type: ICE petrol, ICE diesel, Hybrid, PHEV, BEV                                                                                         
                                                                                                                                                       
 4.4 Data Quality Scoring (1-5)                                                                                                                        
 ┌───────┬───────────────────┬───────────────────────────────────────────────────┐                                                                     
 │ Score │     Data Type     │                    Description                    │                                                                     
 ├───────┼───────────────────┼───────────────────────────────────────────────────┤                                                                     
 │ 1     │ Verified          │ Audited emissions data from borrower/investee     │                                                                     
 ├───────┼───────────────────┼───────────────────────────────────────────────────┤                                                                     
 │ 2     │ Unverified        │ Reported but not audited emissions data           │                                                                     
 ├───────┼───────────────────┼───────────────────────────────────────────────────┤                                                                     
 │ 3     │ Physical Activity │ Calculated from primary activity data (kWh, fuel) │                                                                     
 ├───────┼───────────────────┼───────────────────────────────────────────────────┤                                                                     
 │ 4     │ Economic Activity │ Revenue-based or asset-based estimates            │                                                                     
 ├───────┼───────────────────┼───────────────────────────────────────────────────┤                                                                     
 │ 5     │ Estimated         │ Sector averages, no company-specific data         │                                                                     
 └───────┴───────────────────┴───────────────────────────────────────────────────┘                                                                     
 4.5 Database Schema                                                                                                                                   
                                                                                                                                                       
 # PCAF Module Models                                                                                                                                  
                                                                                                                                                       
 class PCAFPortfolio(SQLModel, table=True):                                                                                                            
     """Financial portfolio for PCAF reporting"""                                                                                                      
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     name: str                                                                                                                                         
     portfolio_type: str  # lending, investment, insurance                                                                                             
     reporting_year: int                                                                                                                               
     base_currency: str = "USD"                                                                                                                        
                                                                                                                                                       
 class PCAFAsset(SQLModel, table=True):                                                                                                                
     """Individual asset in portfolio"""                                                                                                               
     id: UUID                                                                                                                                          
     portfolio_id: UUID                                                                                                                                
     asset_class: str  # listed_equity, corporate_bonds, business_loans,                                                                               
                       # project_finance, commercial_real_estate,                                                                                      
                       # mortgages, motor_vehicle_loans, sovereign_debt                                                                                
                                                                                                                                                       
     # Counterparty/Asset Info                                                                                                                         
     counterparty_name: str                                                                                                                            
     counterparty_id: Optional[str]  # LEI, ISIN, or internal ID                                                                                       
     sector: str  # NACE, GICS, or SIC code                                                                                                            
     country: str                                                                                                                                      
                                                                                                                                                       
     # Financial Data                                                                                                                                  
     outstanding_amount: Decimal                                                                                                                       
     outstanding_amount_currency: str                                                                                                                  
     outstanding_amount_usd: Decimal                                                                                                                   
                                                                                                                                                       
     # Attribution denominator (depends on asset class)                                                                                                
     evic: Optional[Decimal]  # For listed equity/bonds                                                                                                
     total_equity_plus_debt: Optional[Decimal]  # For loans                                                                                            
     property_value: Optional[Decimal]  # For real estate/mortgages                                                                                    
     project_cost: Optional[Decimal]  # For project finance                                                                                            
     vehicle_value: Optional[Decimal]  # For auto loans                                                                                                
     gdp: Optional[Decimal]  # For sovereign debt                                                                                                      
                                                                                                                                                       
     # Emissions Data                                                                                                                                  
     scope_1_emissions_tco2e: Optional[Decimal]                                                                                                        
     scope_2_emissions_tco2e: Optional[Decimal]                                                                                                        
     scope_3_emissions_tco2e: Optional[Decimal]                                                                                                        
     total_emissions_tco2e: Decimal                                                                                                                    
     emissions_data_source: str  # reported, estimated, sector_average                                                                                 
     emissions_year: int                                                                                                                               
                                                                                                                                                       
     # Calculated Results                                                                                                                              
     attribution_factor: Decimal                                                                                                                       
     financed_emissions_tco2e: Decimal                                                                                                                 
     data_quality_score: int  # 1-5                                                                                                                    
                                                                                                                                                       
     # For real estate / mortgages                                                                                                                     
     floor_area_m2: Optional[Decimal]                                                                                                                  
     building_type: Optional[str]                                                                                                                      
     energy_efficiency_class: Optional[str]                                                                                                            
                                                                                                                                                       
     # For motor vehicles                                                                                                                              
     vehicle_type: Optional[str]  # ICE, hybrid, BEV                                                                                                   
     annual_distance_km: Optional[Decimal]                                                                                                             
                                                                                                                                                       
 class PCAFEmissionFactor(SQLModel, table=True):                                                                                                       
     """Sector average emission factors for PCAF"""                                                                                                    
     id: UUID                                                                                                                                          
     asset_class: str                                                                                                                                  
     sector_code: str  # NACE or GICS                                                                                                                  
     sector_name: str                                                                                                                                  
     region: str                                                                                                                                       
                                                                                                                                                       
     # Intensity factors                                                                                                                               
     revenue_intensity_tco2e_per_musd: Optional[Decimal]                                                                                               
     asset_intensity_tco2e_per_musd: Optional[Decimal]                                                                                                 
     physical_intensity: Optional[Decimal]                                                                                                             
     physical_intensity_unit: Optional[str]                                                                                                            
                                                                                                                                                       
     # Building/Real Estate factors                                                                                                                    
     building_type: Optional[str]                                                                                                                      
     ef_per_m2_year: Optional[Decimal]                                                                                                                 
                                                                                                                                                       
     # Vehicle factors                                                                                                                                 
     vehicle_type: Optional[str]                                                                                                                       
     ef_per_km: Optional[Decimal]                                                                                                                      
                                                                                                                                                       
     source: str                                                                                                                                       
     year: int                                                                                                                                         
                                                                                                                                                       
 class PCAFReport(SQLModel, table=True):                                                                                                               
     """PCAF disclosure report"""                                                                                                                      
     id: UUID                                                                                                                                          
     portfolio_id: UUID                                                                                                                                
     reporting_year: int                                                                                                                               
                                                                                                                                                       
     # Aggregated Results                                                                                                                              
     total_financed_emissions_tco2e: Decimal                                                                                                           
     total_outstanding_usd: Decimal                                                                                                                    
     emission_intensity_tco2e_per_musd: Decimal                                                                                                        
                                                                                                                                                       
     # By asset class                                                                                                                                  
     breakdown_by_asset_class: dict  # JSON                                                                                                            
     breakdown_by_sector: dict  # JSON                                                                                                                 
     breakdown_by_region: dict  # JSON                                                                                                                 
                                                                                                                                                       
     # Data Quality                                                                                                                                    
     weighted_data_quality_score: Decimal  # Portfolio-weighted average                                                                                
     coverage_percentage: Decimal  # % of portfolio with emissions data                                                                                
                                                                                                                                                       
     # Status                                                                                                                                          
     status: str  # draft, reviewed, published                                                                                                         
                                                                                                                                                       
 4.6 Data Sources for PCAF                                                                                                                             
                                                                                                                                                       
 Company Emissions:                                                                                                                                    
 - CDP Climate responses                                                                                                                               
 - Company sustainability reports                                                                                                                      
 - Verified GHG inventories                                                                                                                            
 - PCAF database                                                                                                                                       
                                                                                                                                                       
 Sector Averages:                                                                                                                                      
 - PCAF emission factor database                                                                                                                       
 - EXIOBASE                                                                                                                                            
 - EEIO models                                                                                                                                         
 - CRREM (real estate)                                                                                                                                 
                                                                                                                                                       
 Financial Data:                                                                                                                                       
 - Bloomberg, Refinitiv (EVIC)                                                                                                                         
 - Company filings (debt, equity)                                                                                                                      
 - Internal loan systems                                                                                                                               
                                                                                                                                                       
 ---                                                                                                                                                   
 5. EPD Module                                                                                                                                         
                                                                                                                                                       
 5.1 Regulatory Framework                                                                                                                              
                                                                                                                                                       
 Standards:                                                                                                                                            
 - https://www.iso.org/standard/37456.html - Type III Environmental Declarations                                                                       
 - https://standards.cencenelec.eu/ - Construction Products                                                                                            
 - ISO 14040/14044 - Life Cycle Assessment                                                                                                             
                                                                                                                                                       
 Program Operators:                                                                                                                                    
 - EPD International (environdec.com)                                                                                                                  
 - IBU (Germany)                                                                                                                                       
 - NSF International (USA)                                                                                                                             
 - UL Environment                                                                                                                                      
                                                                                                                                                       
 5.2 EPD Structure                                                                                                                                     
                                                                                                                                                       
 5.2.1 Life Cycle Stages                                                                                                                               
 ┌────────┬───────────────────────────┬─────────────────────────────┬──────────────────────┐                                                           
 │ Module │           Stage           │         Description         │       Required       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ A1     │ Raw Material Supply       │ Extraction and processing   │ Mandatory            │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ A2     │ Transport                 │ Raw materials to factory    │ Mandatory            │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ A3     │ Manufacturing             │ Production process          │ Mandatory            │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ A4     │ Transport                 │ Product to site             │ Optional             │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ A5     │ Construction/Installation │ Installation process        │ Optional             │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B1     │ Use                       │ Direct emissions during use │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B2     │ Maintenance               │ Regular maintenance         │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B3     │ Repair                    │ Repair activities           │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B4     │ Replacement               │ Component replacement       │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B5     │ Refurbishment             │ Major refurbishment         │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B6     │ Operational Energy        │ Energy use in building      │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ B7     │ Operational Water         │ Water use in building       │ Scenario-based       │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ C1     │ Deconstruction/Demolition │ End of life removal         │ Mandatory (EN 15804) │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ C2     │ Transport                 │ To waste processing         │ Mandatory (EN 15804) │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ C3     │ Waste Processing          │ Recycling, recovery         │ Mandatory (EN 15804) │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ C4     │ Disposal                  │ Final disposal              │ Mandatory (EN 15804) │                                                           
 ├────────┼───────────────────────────┼─────────────────────────────┼──────────────────────┤                                                           
 │ D      │ Benefits Beyond           │ Recycling credits           │ Optional             │                                                           
 └────────┴───────────────────────────┴─────────────────────────────┴──────────────────────┘                                                           
 5.2.2 Impact Categories (EN 15804+A2)                                                                                                                 
 ┌────────────────┬──────────────────────────────────┬──────────────┐                                                                                  
 │    Category    │            Indicator             │     Unit     │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ GWP-total      │ Global Warming Potential (total) │ kg CO2-eq    │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ GWP-fossil     │ GWP from fossil sources          │ kg CO2-eq    │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ GWP-biogenic   │ GWP from biogenic sources        │ kg CO2-eq    │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ GWP-luluc      │ GWP from land use change         │ kg CO2-eq    │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ ODP            │ Ozone Depletion Potential        │ kg CFC-11-eq │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ AP             │ Acidification Potential          │ mol H+-eq    │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ EP-freshwater  │ Eutrophication (freshwater)      │ kg P-eq      │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ EP-marine      │ Eutrophication (marine)          │ kg N-eq      │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ EP-terrestrial │ Eutrophication (terrestrial)     │ mol N-eq     │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ POCP           │ Photochemical Ozone Creation     │ kg NMVOC-eq  │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ ADPE           │ Abiotic Depletion (elements)     │ kg Sb-eq     │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ ADPF           │ Abiotic Depletion (fossil fuels) │ MJ           │                                                                                  
 ├────────────────┼──────────────────────────────────┼──────────────┤                                                                                  
 │ WDP            │ Water Deprivation Potential      │ m³ world-eq  │                                                                                  
 └────────────────┴──────────────────────────────────┴──────────────┘                                                                                  
 5.3 Database Schema                                                                                                                                   
                                                                                                                                                       
 # EPD Module Models                                                                                                                                   
                                                                                                                                                       
 class ProductCategoryRule(SQLModel, table=True):                                                                                                      
     """PCR definitions"""                                                                                                                             
     id: UUID                                                                                                                                          
     pcr_id: str  # e.g., "PCR 2019:14"                                                                                                                
     name: str                                                                                                                                         
     product_category: str                                                                                                                             
     program_operator: str  # EPD International, IBU, etc.                                                                                             
     valid_from: date                                                                                                                                  
     valid_until: date                                                                                                                                 
     reference_pcr_id: Optional[str]  # For sub-PCRs                                                                                                   
     functional_unit: str                                                                                                                              
     declared_unit: str                                                                                                                                
     system_boundary: str  # cradle-to-gate, cradle-to-grave                                                                                           
     mandatory_modules: List[str]  # ["A1", "A2", "A3", "C1", "C2", "C3", "C4"]                                                                        
                                                                                                                                                       
 class Product(SQLModel, table=True):                                                                                                                  
     """Product definitions for EPD"""                                                                                                                 
     id: UUID                                                                                                                                          
     organization_id: UUID                                                                                                                             
     name: str                                                                                                                                         
     product_code: str                                                                                                                                 
     description: str                                                                                                                                  
     pcr_id: UUID  # FK to ProductCategoryRule                                                                                                         
     functional_unit: str                                                                                                                              
     declared_unit: str                                                                                                                                
     declared_unit_value: Decimal                                                                                                                      
     declared_unit_measure: str  # kg, m2, m3, piece                                                                                                   
                                                                                                                                                       
     # Technical specifications                                                                                                                        
     technical_specs: dict  # JSON                                                                                                                     
                                                                                                                                                       
     # Manufacturing                                                                                                                                   
     manufacturing_site_id: Optional[UUID]                                                                                                             
     production_period_start: date                                                                                                                     
     production_period_end: date                                                                                                                       
     annual_production_volume: Decimal                                                                                                                 
                                                                                                                                                       
 class LifeCycleInventory(SQLModel, table=True):                                                                                                       
     """LCI data for product"""                                                                                                                        
     id: UUID                                                                                                                                          
     product_id: UUID                                                                                                                                  
     module: str  # A1, A2, A3, etc.                                                                                                                   
                                                                                                                                                       
     # Inputs                                                                                                                                          
     input_flows: List[dict]  # JSON array of {material, quantity, unit, source}                                                                       
                                                                                                                                                       
     # Outputs                                                                                                                                         
     output_flows: List[dict]  # Emissions, waste, co-products                                                                                         
                                                                                                                                                       
     # Energy                                                                                                                                          
     electricity_kwh: Decimal                                                                                                                          
     electricity_source: str  # grid, renewable, specific                                                                                              
     natural_gas_mj: Optional[Decimal]                                                                                                                 
     other_fuels: Optional[dict]                                                                                                                       
                                                                                                                                                       
     # Transport (for A2, A4, C2)                                                                                                                      
     transport_tkm: Optional[Decimal]                                                                                                                  
     transport_mode: Optional[str]                                                                                                                     
                                                                                                                                                       
     # Data quality                                                                                                                                    
     data_quality_score: int                                                                                                                           
     data_source: str                                                                                                                                  
                                                                                                                                                       
 class LifeCycleImpactAssessment(SQLModel, table=True):                                                                                                
     """LCIA results by module"""                                                                                                                      
     id: UUID                                                                                                                                          
     product_id: UUID                                                                                                                                  
     module: str                                                                                                                                       
     lcia_method: str  # e.g., "EN 15804+A2"                                                                                                           
                                                                                                                                                       
     # Impact categories                                                                                                                               
     gwp_total: Decimal                                                                                                                                
     gwp_fossil: Decimal                                                                                                                               
     gwp_biogenic: Decimal                                                                                                                             
     gwp_luluc: Decimal                                                                                                                                
     odp: Decimal                                                                                                                                      
     ap: Decimal                                                                                                                                       
     ep_freshwater: Decimal                                                                                                                            
     ep_marine: Decimal                                                                                                                                
     ep_terrestrial: Decimal                                                                                                                           
     pocp: Decimal                                                                                                                                     
     adpe: Decimal                                                                                                                                     
     adpf: Decimal                                                                                                                                     
     wdp: Decimal                                                                                                                                      
                                                                                                                                                       
     # Resource use                                                                                                                                    
     pere: Decimal  # Renewable primary energy                                                                                                         
     perm: Decimal  # Renewable primary energy materials                                                                                               
     pert: Decimal  # Total renewable                                                                                                                  
     penre: Decimal  # Non-renewable primary energy                                                                                                    
     penrm: Decimal  # Non-renewable materials                                                                                                         
     penrt: Decimal  # Total non-renewable                                                                                                             
     sm: Decimal    # Secondary materials                                                                                                              
     rsf: Decimal   # Renewable secondary fuels                                                                                                        
     nrsf: Decimal  # Non-renewable secondary fuels                                                                                                    
     fw: Decimal    # Net fresh water                                                                                                                  
                                                                                                                                                       
     # Waste                                                                                                                                           
     hwd: Decimal   # Hazardous waste disposed                                                                                                         
     nhwd: Decimal  # Non-hazardous waste                                                                                                              
     rwd: Decimal   # Radioactive waste                                                                                                                
                                                                                                                                                       
     # Output flows                                                                                                                                    
     cru: Decimal   # Components for reuse                                                                                                             
     mfr: Decimal   # Materials for recycling                                                                                                          
     mer: Decimal   # Materials for energy recovery                                                                                                    
     eee: Decimal   # Exported electrical energy                                                                                                       
     eet: Decimal   # Exported thermal energy                                                                                                          
                                                                                                                                                       
 class EPDDocument(SQLModel, table=True):                                                                                                              
     """Generated EPD document"""                                                                                                                      
     id: UUID                                                                                                                                          
     product_id: UUID                                                                                                                                  
     epd_number: str  # Unique registration number                                                                                                     
     program_operator: str                                                                                                                             
                                                                                                                                                       
     # Validity                                                                                                                                        
     publication_date: date                                                                                                                            
     valid_until: date  # Typically 5 years                                                                                                            
                                                                                                                                                       
     # Verification                                                                                                                                    
     verifier_name: str                                                                                                                                
     verifier_organization: str                                                                                                                        
     verification_date: date                                                                                                                           
     verification_statement: str                                                                                                                       
                                                                                                                                                       
     # Document                                                                                                                                        
     pdf_url: str                                                                                                                                      
     machine_readable_url: Optional[str]  # ILCD, JSON-LD                                                                                              
                                                                                                                                                       
     # Status                                                                                                                                          
     status: str  # draft, verified, published, expired, withdrawn                                                                                     
                                                                                                                                                       
     # Results summary                                                                                                                                 
     total_gwp_a1_a3: Decimal  # Most commonly cited figure                                                                                            
     total_gwp_cradle_to_grave: Optional[Decimal]                                                                                                      
                                                                                                                                                       
 5.4 EPD Generation Workflow                                                                                                                           
                                                                                                                                                       
 ┌─────────────────────────────────────────────────────────────────┐                                                                                   
 │  EPD Generation Workflow                                        │                                                                                   
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │                                                                 │                                                                                   
 │  1. [Select PCR] → Define product category rules                │                                                                                   
 │            ↓                                                    │                                                                                   
 │  2. [Define Product] → Technical specs, functional unit         │                                                                                   
 │            ↓                                                    │                                                                                   
 │  3. [Collect LCI Data] → Materials, energy, transport          │                                                                                    
 │            ↓                                                    │                                                                                   
 │  4. [Run LCIA] → Calculate impact categories                   │                                                                                    
 │            ↓                                                    │                                                                                   
 │  5. [Internal Review] → Quality check, completeness            │                                                                                    
 │            ↓                                                    │                                                                                   
 │  6. [Third-Party Verification] → Independent verifier          │                                                                                    
 │            ↓                                                    │                                                                                   
 │  7. [Publication] → Register with program operator             │                                                                                    
 │            ↓                                                    │                                                                                   
 │  8. [Maintenance] → Annual updates, 5-year renewal             │                                                                                    
 │                                                                 │                                                                                   
 └─────────────────────────────────────────────────────────────────┘                                                                                   
                                                                                                                                                       
 ---                                                                                                                                                   
 6. LCA Engine                                                                                                                                         
                                                                                                                                                       
 6.1 Overview                                                                                                                                          
                                                                                                                                                       
 The LCA Engine is the shared calculation core for EPD generation and product carbon footprints. It must comply with ISO 14040/14044.                  
                                                                                                                                                       
 6.2 Architecture                                                                                                                                      
                                                                                                                                                       
 ┌─────────────────────────────────────────────────────────────────┐                                                                                   
 │                        LCA Engine                               │                                                                                   
 ├─────────────────────────────────────────────────────────────────┤                                                                                   
 │                                                                 │                                                                                   
 │  ┌─────────────┐   ┌─────────────┐   ┌─────────────┐          │                                                                                     
 │  │   LCI       │   │   LCIA      │   │Interpretation│         │                                                                                     
 │  │ Inventory   │ → │   Impact    │ → │   & Report  │          │                                                                                     
 │  │ Collection  │   │ Assessment  │   │             │          │                                                                                     
 │  └─────────────┘   └─────────────┘   └─────────────┘          │                                                                                     
 │        ↑                 ↑                                      │                                                                                   
 │  ┌─────────────┐   ┌─────────────┐                             │                                                                                    
 │  │ Background  │   │   LCIA      │                             │                                                                                    
 │  │ Databases   │   │  Methods    │                             │                                                                                    
 │  │ (ecoinvent) │   │ (ReCiPe)    │                             │                                                                                    
 │  └─────────────┘   └─────────────┘                             │                                                                                    
 │                                                                 │                                                                                   
 └─────────────────────────────────────────────────────────────────┘                                                                                   
                                                                                                                                                       
 6.3 Background Databases                                                                                                                              
                                                                                                                                                       
 Commercial (Licensing Required):                                                                                                                      
 - ecoinvent 3.9+ (~18,000 datasets)                                                                                                                   
 - GaBi Professional Database                                                                                                                          
 - Sphera (formerly thinkstep)                                                                                                                         
                                                                                                                                                       
 Free/Open:                                                                                                                                            
 - ELCD (European Reference Life Cycle Database)                                                                                                       
 - USLCI (US Life Cycle Inventory)                                                                                                                     
 - Agri-footprint (agriculture)                                                                                                                        
 - Idemat (TU Delft)                                                                                                                                   
 - Ökobaudat (German construction)                                                                                                                     
                                                                                                                                                       
 6.4 LCIA Methods                                                                                                                                      
 ┌─────────────┬────────┬─────────────────────────┬───────────────────┐                                                                                
 │   Method    │ Region │    Impact Categories    │     Use Case      │                                                                                
 ├─────────────┼────────┼─────────────────────────┼───────────────────┤                                                                                
 │ ReCiPe 2016 │ Global │ 18 midpoint, 3 endpoint │ General           │                                                                                
 ├─────────────┼────────┼─────────────────────────┼───────────────────┤                                                                                
 │ EN 15804+A2 │ Europe │ 13 mandatory            │ Construction EPDs │                                                                                
 ├─────────────┼────────┼─────────────────────────┼───────────────────┤                                                                                
 │ TRACI 2.1   │ USA    │ 10 categories           │ North America     │                                                                                
 ├─────────────┼────────┼─────────────────────────┼───────────────────┤                                                                                
 │ EF 3.0      │ Europe │ 16 categories           │ EU PEF compliance │                                                                                
 ├─────────────┼────────┼─────────────────────────┼───────────────────┤                                                                                
 │ IPCC AR6    │ Global │ GWP only                │ Carbon footprint  │                                                                                
 └─────────────┴────────┴─────────────────────────┴───────────────────┘                                                                                
 6.5 Database Schema                                                                                                                                   
                                                                                                                                                       
 # LCA Engine Models                                                                                                                                   
                                                                                                                                                       
 class LCAProcess(SQLModel, table=True):                                                                                                               
     """Unit process in LCA"""                                                                                                                         
     id: UUID                                                                                                                                          
     name: str                                                                                                                                         
     geography: str                                                                                                                                    
     reference_product: str                                                                                                                            
     reference_flow_amount: Decimal                                                                                                                    
     reference_flow_unit: str                                                                                                                          
                                                                                                                                                       
     # Classification                                                                                                                                  
     isic_code: Optional[str]                                                                                                                          
     cpc_code: Optional[str]                                                                                                                           
                                                                                                                                                       
     # Data quality (Pedigree matrix)                                                                                                                  
     reliability: int  # 1-5                                                                                                                           
     completeness: int                                                                                                                                 
     temporal_correlation: int                                                                                                                         
     geographical_correlation: int                                                                                                                     
     technological_correlation: int                                                                                                                    
                                                                                                                                                       
     # Source                                                                                                                                          
     database: str  # ecoinvent, ELCD, custom                                                                                                          
     database_version: str                                                                                                                             
                                                                                                                                                       
 class LCAFlow(SQLModel, table=True):                                                                                                                  
     """Elementary or intermediate flow"""                                                                                                             
     id: UUID                                                                                                                                          
     name: str                                                                                                                                         
     flow_type: str  # elementary, product, waste                                                                                                      
     compartment: Optional[str]  # air, water, soil, resource                                                                                          
     sub_compartment: Optional[str]                                                                                                                    
     unit: str                                                                                                                                         
     cas_number: Optional[str]                                                                                                                         
                                                                                                                                                       
 class LCAExchange(SQLModel, table=True):                                                                                                              
     """Input/output in a process"""                                                                                                                   
     id: UUID                                                                                                                                          
     process_id: UUID                                                                                                                                  
     flow_id: UUID                                                                                                                                     
     is_input: bool                                                                                                                                    
     amount: Decimal                                                                                                                                   
     unit: str                                                                                                                                         
     uncertainty_type: Optional[str]  # lognormal, normal, triangular                                                                                  
     uncertainty_params: Optional[dict]                                                                                                                
                                                                                                                                                       
 class CharacterizationFactor(SQLModel, table=True):                                                                                                   
     """LCIA characterization factors"""                                                                                                               
     id: UUID                                                                                                                                          
     lcia_method: str                                                                                                                                  
     impact_category: str                                                                                                                              
     flow_id: UUID                                                                                                                                     
     factor: Decimal                                                                                                                                   
     unit: str                                                                                                                                         
                                                                                                                                                       
 ---                                                                                                                                                   
 7. Database Schema                                                                                                                                    
                                                                                                                                                       
 7.1 Complete Entity Relationship                                                                                                                      
                                                                                                                                                       
 Organization                                                                                                                                          
 ├── User                                                                                                                                              
 ├── Site                                                                                                                                              
 ├── ReportingPeriod                                                                                                                                   
 │   ├── Activity → Emission (GHG)                                                                                                                     
 │   ├── CBAMImport → CBAMQuarterlyReport (CBAM)                                                                                                       
 │   └── PCAFAsset → PCAFReport (PCAF)                                                                                                                 
 ├── Product                                                                                                                                           
 │   ├── LifeCycleInventory                                                                                                                            
 │   ├── LifeCycleImpactAssessment                                                                                                                     
 │   └── EPDDocument                                                                                                                                   
 ├── CBAMInstallation                                                                                                                                  
 └── PCAFPortfolio                                                                                                                                     
                                                                                                                                                       
 7.2 Shared Reference Tables                                                                                                                           
                                                                                                                                                       
 # Shared across modules                                                                                                                               
 EmissionFactor          # GHG, CBAM direct emissions                                                                                                  
 GridEmissionFactor      # GHG Scope 2, CBAM indirect, PCAF buildings                                                                                  
 RefrigerantGWP          # GHG Scope 1.3                                                                                                               
 UnitConversion          # All modules                                                                                                                 
 CurrencyConversion      # All modules                                                                                                                 
 Airport                 # GHG 3.6                                                                                                                     
                                                                                                                                                       
 7.3 Migration Plan                                                                                                                                    
                                                                                                                                                       
 Migration 001: GHG Inventory base tables (DONE)                                                                                                       
 Migration 002: Add ReportingPeriod status fields                                                                                                      
 Migration 003: Add Activity data_quality_score                                                                                                        
 Migration 004: CBAM tables (CBAMProduct, CBAMInstallation, CBAMImport, CBAMReport)                                                                    
 Migration 005: PCAF tables (PCAFPortfolio, PCAFAsset, PCAFEmissionFactor, PCAFReport)                                                                 
 Migration 006: EPD tables (PCR, Product, LCI, LCIA, EPDDocument)                                                                                      
 Migration 007: LCA Engine tables (Process, Flow, Exchange, CharacterizationFactor)                                                                    
                                                                                                                                                       
 ---                                                                                                                                                   
 8. API Architecture                                                                                                                                   
                                                                                                                                                       
 8.1 API Endpoints                                                                                                                                     
                                                                                                                                                       
 GHG Endpoints (Existing + New)                                                                                                                        
                                                                                                                                                       
 # Existing                                                                                                                                            
 GET/POST    /api/activities                                                                                                                           
 GET/PUT/DEL /api/activities/{id}                                                                                                                      
 GET         /api/periods/{id}/report/summary                                                                                                          
 GET         /api/emission-factors                                                                                                                     
                                                                                                                                                       
 # New                                                                                                                                                 
 POST        /api/periods/{id}/submit-for-verification                                                                                                 
 POST        /api/periods/{id}/verify                                                                                                                  
 GET         /api/periods/{id}/audit-package                                                                                                           
 GET         /api/periods/{id}/report/cdp-export                                                                                                       
 GET         /api/periods/{id}/report/csrd-export                                                                                                      
                                                                                                                                                       
 CBAM Endpoints                                                                                                                                        
                                                                                                                                                       
 # Products & Installations                                                                                                                            
 GET         /api/cbam/products                    # CN code lookup                                                                                    
 GET/POST    /api/cbam/installations                                                                                                                   
 GET/PUT/DEL /api/cbam/installations/{id}                                                                                                              
                                                                                                                                                       
 # Imports                                                                                                                                             
 GET/POST    /api/cbam/imports                                                                                                                         
 GET/PUT/DEL /api/cbam/imports/{id}                                                                                                                    
 POST        /api/cbam/imports/bulk-upload         # Excel import                                                                                      
                                                                                                                                                       
 # Calculations                                                                                                                                        
 POST        /api/cbam/imports/{id}/calculate      # Calculate embedded emissions                                                                      
 GET         /api/cbam/default-values/{cn_code}    # Get EU default values                                                                             
                                                                                                                                                       
 # Reports                                                                                                                                             
 GET         /api/cbam/reports/quarterly/{year}/{quarter}                                                                                              
 POST        /api/cbam/reports/quarterly/{year}/{quarter}/generate                                                                                     
 POST        /api/cbam/reports/quarterly/{year}/{quarter}/submit                                                                                       
 GET         /api/cbam/reports/annual/{year}                                                                                                           
 POST        /api/cbam/certificates/calculate      # Calculate required certificates                                                                   
                                                                                                                                                       
 PCAF Endpoints                                                                                                                                        
                                                                                                                                                       
 # Portfolios                                                                                                                                          
 GET/POST    /api/pcaf/portfolios                                                                                                                      
 GET/PUT/DEL /api/pcaf/portfolios/{id}                                                                                                                 
                                                                                                                                                       
 # Assets                                                                                                                                              
 GET/POST    /api/pcaf/portfolios/{id}/assets                                                                                                          
 GET/PUT/DEL /api/pcaf/assets/{id}                                                                                                                     
 POST        /api/pcaf/assets/bulk-upload                                                                                                              
                                                                                                                                                       
 # Calculations                                                                                                                                        
 POST        /api/pcaf/assets/{id}/calculate       # Calculate financed emissions                                                                      
 GET         /api/pcaf/emission-factors            # Sector averages                                                                                   
                                                                                                                                                       
 # Reports                                                                                                                                             
 GET         /api/pcaf/portfolios/{id}/report                                                                                                          
 POST        /api/pcaf/portfolios/{id}/report/generate                                                                                                 
 GET         /api/pcaf/portfolios/{id}/disclosure  # PCAF disclosure format                                                                            
                                                                                                                                                       
 EPD Endpoints                                                                                                                                         
                                                                                                                                                       
 # PCRs                                                                                                                                                
 GET         /api/epd/pcrs                         # Available PCRs                                                                                    
 GET         /api/epd/pcrs/{id}                                                                                                                        
                                                                                                                                                       
 # Products                                                                                                                                            
 GET/POST    /api/epd/products                                                                                                                         
 GET/PUT/DEL /api/epd/products/{id}                                                                                                                    
                                                                                                                                                       
 # LCI Data                                                                                                                                            
 GET/POST    /api/epd/products/{id}/lci                                                                                                                
 PUT         /api/epd/products/{id}/lci/{module}                                                                                                       
                                                                                                                                                       
 # LCIA Calculation                                                                                                                                    
 POST        /api/epd/products/{id}/calculate      # Run LCIA                                                                                          
 GET         /api/epd/products/{id}/results                                                                                                            
                                                                                                                                                       
 # EPD Generation                                                                                                                                      
 POST        /api/epd/products/{id}/generate-epd                                                                                                       
 GET         /api/epd/documents/{id}                                                                                                                   
 POST        /api/epd/documents/{id}/verify                                                                                                            
 GET         /api/epd/documents/{id}/pdf                                                                                                               
                                                                                                                                                       
 ---                                                                                                                                                   
 9. Verification & Audit                                                                                                                               
                                                                                                                                                       
 9.1 Audit Requirements by Module                                                                                                                      
 ┌───────────────┬──────────────────────────────────┬───────────────┬───────────────────────────────┐                                                  
 │    Module     │        Verification Type         │   Standard    │           Frequency           │                                                  
 ├───────────────┼──────────────────────────────────┼───────────────┼───────────────────────────────┤                                                  
 │ GHG Inventory │ Limited or Reasonable Assurance  │ ISO 14064-3   │ Annual                        │                                                  
 ├───────────────┼──────────────────────────────────┼───────────────┼───────────────────────────────┤                                                  
 │ CBAM          │ EU CBAM Registry Verification    │ EU Regulation │ Quarterly/Annual              │                                                  
 ├───────────────┼──────────────────────────────────┼───────────────┼───────────────────────────────┤                                                  
 │ PCAF          │ Internal review + External audit │ PCAF Standard │ Annual                        │                                                  
 ├───────────────┼──────────────────────────────────┼───────────────┼───────────────────────────────┤                                                  
 │ EPD           │ Third-party verification         │ ISO 14025     │ Per product (5-year validity) │                                                  
 └───────────────┴──────────────────────────────────┴───────────────┴───────────────────────────────┘                                                  
 9.2 Audit Trail Requirements                                                                                                                          
                                                                                                                                                       
 All Modules Must Track:                                                                                                                               
 1. Data Entry: Who, when, what was entered                                                                                                            
 2. Calculations: Formula used, factors applied, intermediate results                                                                                  
 3. Changes: Full change history with user, timestamp, old/new values                                                                                  
 4. Documents: Supporting documents linked to activities                                                                                               
 5. Exports: When reports were generated and submitted                                                                                                 
                                                                                                                                                       
 Database Implementation:                                                                                                                              
 class AuditLog(SQLModel, table=True):                                                                                                                 
     id: UUID                                                                                                                                          
     timestamp: datetime                                                                                                                               
     user_id: UUID                                                                                                                                     
     organization_id: UUID                                                                                                                             
                                                                                                                                                       
     # What                                                                                                                                            
     entity_type: str  # activity, emission, import, asset, product                                                                                    
     entity_id: UUID                                                                                                                                   
     action: str  # create, update, delete, calculate, submit, verify                                                                                  
                                                                                                                                                       
     # Details                                                                                                                                         
     field_changes: Optional[dict]  # {field: {old: x, new: y}}                                                                                        
     calculation_details: Optional[dict]                                                                                                               
                                                                                                                                                       
     # Context                                                                                                                                         
     ip_address: Optional[str]                                                                                                                         
     user_agent: Optional[str]                                                                                                                         
                                                                                                                                                       
 9.3 Verification Statement Templates                                                                                                                  
                                                                                                                                                       
 GHG Inventory:                                                                                                                                        
 INDEPENDENT VERIFICATION STATEMENT                                                                                                                    
                                                                                                                                                       
 We have performed a [limited/reasonable] assurance engagement on the                                                                                  
 greenhouse gas (GHG) statement of [Organization Name] for the reporting                                                                               
 period [Start Date] to [End Date].                                                                                                                    
                                                                                                                                                       
 Scope:                                                                                                                                                
 - Scope 1 Direct Emissions: [X] tCO2e                                                                                                                 
 - Scope 2 Indirect Emissions: [X] tCO2e                                                                                                               
 - Scope 3 Value Chain Emissions: [X] tCO2e                                                                                                            
 - Total: [X] tCO2e                                                                                                                                    
                                                                                                                                                       
 Based on our procedures, [nothing has come to our attention that causes                                                                               
 us to believe / in our opinion] the GHG statement is not prepared, in all                                                                             
 material respects, in accordance with the GHG Protocol Corporate Standard.                                                                            
                                                                                                                                                       
 [Verifier Name]                                                                                                                                       
 [Accreditation Number]                                                                                                                                
 [Date]                                                                                                                                                
                                                                                                                                                       
 ---                                                                                                                                                   
 10. Implementation Roadmap                                                                                                                            
                                                                                                                                                       
 Phase 1: GHG Completion (Weeks 1-4)                                                                                                                   
 ┌────────────────────────────────────────────┬──────────┬────────┬───────────────────────┐                                                            
 │                    Task                    │ Priority │ Effort │     Dependencies      │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ Verification workflow (status, submission) │ High     │ 5 days │ -                     │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ Data quality scoring (1-5 scale)           │ High     │ 3 days │ -                     │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ Enhanced GHG report (ISO 14064-1 format)   │ High     │ 5 days │ -                     │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ Audit package export                       │ High     │ 3 days │ Verification workflow │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ CDP/CSRD export formats                    │ Medium   │ 4 days │ Report enhancement    │                                                            
 ├────────────────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                            
 │ Market-based Scope 2 expansion             │ Medium   │ 3 days │ -                     │                                                            
 └────────────────────────────────────────────┴──────────┴────────┴───────────────────────┘                                                            
 Phase 2: CBAM Module (Weeks 5-12)                                                                                                                     
 ┌─────────────────────────────────────────┬──────────┬────────┬────────────────────┐                                                                  
 │                  Task                   │ Priority │ Effort │    Dependencies    │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Database schema (migrations)            │ High     │ 3 days │ -                  │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ CN code reference data                  │ High     │ 2 days │ Schema             │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Default emission values (EU Commission) │ High     │ 3 days │ Schema             │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Installation management CRUD            │ High     │ 4 days │ Schema             │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Import entry forms                      │ High     │ 5 days │ Installations      │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Embedded emissions calculator           │ High     │ 5 days │ Default values     │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Quarterly report generation             │ High     │ 4 days │ Calculator         │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Annual declaration calculation          │ High     │ 4 days │ Calculator         │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ Certificate requirement calculator      │ Medium   │ 3 days │ Annual declaration │                                                                  
 ├─────────────────────────────────────────┼──────────┼────────┼────────────────────┤                                                                  
 │ CBAM Registry integration               │ Low      │ 5 days │ Reports            │                                                                  
 └─────────────────────────────────────────┴──────────┴────────┴────────────────────┘                                                                  
 Phase 3: PCAF Module (Weeks 13-20)                                                                                                                    
 ┌─────────────────────────────────┬──────────┬────────┬───────────────────────┐                                                                       
 │              Task               │ Priority │ Effort │     Dependencies      │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Database schema (migrations)    │ High     │ 3 days │ -                     │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Asset class definitions         │ High     │ 2 days │ Schema                │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Attribution formula engine      │ High     │ 5 days │ Schema                │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Sector emission factor database │ High     │ 5 days │ -                     │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Portfolio management UI         │ High     │ 5 days │ Schema                │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Asset entry forms (7 types)     │ High     │ 8 days │ Attribution engine    │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Financed emissions calculator   │ High     │ 5 days │ Attribution + Factors │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Data quality scoring            │ High     │ 2 days │ -                     │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ Portfolio-level reports         │ High     │ 4 days │ Calculator            │                                                                       
 ├─────────────────────────────────┼──────────┼────────┼───────────────────────┤                                                                       
 │ PCAF disclosure format export   │ Medium   │ 3 days │ Reports               │                                                                       
 └─────────────────────────────────┴──────────┴────────┴───────────────────────┘                                                                       
 Phase 4: LCA Engine (Weeks 21-28)                                                                                                                     
 ┌───────────────────────────────────┬──────────┬─────────┬──────────────────┐                                                                         
 │               Task                │ Priority │ Effort  │   Dependencies   │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ LCA database schema               │ High     │ 4 days  │ -                │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ Background database integration   │ High     │ 10 days │ Schema           │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ Unit process modeling             │ High     │ 5 days  │ Database         │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ LCIA calculation engine           │ High     │ 8 days  │ Process modeling │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ EN 15804+A2 method implementation │ High     │ 5 days  │ LCIA engine      │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ Uncertainty analysis              │ Medium   │ 4 days  │ LCIA engine      │                                                                         
 ├───────────────────────────────────┼──────────┼─────────┼──────────────────┤                                                                         
 │ LCA result visualization          │ Medium   │ 4 days  │ LCIA engine      │                                                                         
 └───────────────────────────────────┴──────────┴─────────┴──────────────────┘                                                                         
 Phase 5: EPD Module (Weeks 29-36)                                                                                                                     
 ┌──────────────────────────────┬──────────┬────────┬─────────────────────┐                                                                            
 │             Task             │ Priority │ Effort │    Dependencies     │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ PCR database                 │ High     │ 3 days │ -                   │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ Product definition forms     │ High     │ 4 days │ PCR database        │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ LCI data collection UI       │ High     │ 6 days │ LCA Engine          │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ LCIA integration             │ High     │ 4 days │ LCA Engine          │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ EPD document generation      │ High     │ 5 days │ LCIA                │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ Verification workflow        │ High     │ 3 days │ Document generation │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ Program operator integration │ Medium   │ 5 days │ Verification        │                                                                            
 ├──────────────────────────────┼──────────┼────────┼─────────────────────┤                                                                            
 │ EPD registry publication     │ Low      │ 4 days │ Program operator    │                                                                            
 └──────────────────────────────┴──────────┴────────┴─────────────────────┘                                                                            
 Phase 6: Integration & Testing (Weeks 37-40)                                                                                                          
 ┌─────────────────────────────┬──────────┬────────┬──────────────────┐                                                                                
 │            Task             │ Priority │ Effort │   Dependencies   │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ Cross-module data sharing   │ High     │ 5 days │ All modules      │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ End-to-end testing          │ High     │ 5 days │ All modules      │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ Performance optimization    │ High     │ 3 days │ Testing          │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ Documentation               │ High     │ 5 days │ All modules      │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ Auditor walkthrough         │ High     │ 3 days │ Documentation    │                                                                                
 ├─────────────────────────────┼──────────┼────────┼──────────────────┤                                                                                
 │ Beta testing with real data │ High     │ 5 days │ Auditor approval │                                                                                
 └─────────────────────────────┴──────────┴────────┴──────────────────┘                                                                                
 ---                                                                                                                                                   
 Summary                                                                                                                                               
                                                                                                                                                       
 Total Implementation Timeline: 40 weeks (~10 months)                                                                                                  
                                                                                                                                                       
 Resource Requirements                                                                                                                                 
 ┌─────────────────────────┬─────┬──────────┐                                                                                                          
 │          Role           │ FTE │ Duration │                                                                                                          
 ├─────────────────────────┼─────┼──────────┤                                                                                                          
 │ Backend Developer       │ 2   │ 40 weeks │                                                                                                          
 ├─────────────────────────┼─────┼──────────┤                                                                                                          
 │ Frontend Developer      │ 2   │ 40 weeks │                                                                                                          
 ├─────────────────────────┼─────┼──────────┤                                                                                                          
 │ Data Engineer           │ 1   │ 20 weeks │                                                                                                          
 ├─────────────────────────┼─────┼──────────┤                                                                                                          
 │ Domain Expert (GHG/LCA) │ 0.5 │ 40 weeks │                                                                                                          
 ├─────────────────────────┼─────┼──────────┤                                                                                                          
 │ QA Engineer             │ 1   │ 20 weeks │                                                                                                          
 └─────────────────────────┴─────┴──────────┘                                                                                                          
 Key Success Metrics                                                                                                                                   
                                                                                                                                                       
 1. Calculation Accuracy: ±5% vs manual calculation                                                                                                    
 2. Audit Pass Rate: 95% first-time pass                                                                                                               
 3. Data Quality: Average score < 3.0 (higher accuracy)                                                                                                
 4. Compliance Coverage: 100% of required fields per regulation                                                                                        
 5. Report Generation: < 30 seconds for standard reports                                                                                               
                                                                                                                                                       
 Critical Dependencies                                                                                                                                 
                                                                                                                                                       
 1. ecoinvent License for LCA background data                                                                                                          
 2. EU CBAM Registry Access for submission integration                                                                                                 
 3. Third-Party Verifier Partnerships for EPD certification                                                                                            
 4. CDP/CSRD Template Updates as regulations evolve                                                                                                    
                                                                                                                                                       
 ---                                                                                                                                                   
 References                                                                                                                                            
                                                                                                                                                       
 Standards & Regulations                                                                                                                               
                                                                                                                                                       
 - https://ghgprotocol.org/corporate-standard                                                                                                          
 - https://taxation-customs.ec.europa.eu/carbon-border-adjustment-mechanism_en                                                                         
 - https://carbonaccountingfinancials.com/standard                                                                                                     
 - https://www.iso.org/standard/37456.html                                                                                                             
 - https://standards.cencenelec.eu/                                                                                                                    
 - https://www.iso.org/standard/37456.html                                                                                                             
                                                                                                                                                       
 Data Sources                                                                                                                                          
                                                                                                                                                       
 - DEFRA UK Conversion Factors 2024                                                                                                                    
 - EPA eGRID                                                                                                                                           
 - USEEIO 2.0                                                                                                                                          
 - IPCC AR6 GWP Values                                                                                                                                 
 - ecoinvent 3.9                                                                                                                                       
 - CRREM Database   